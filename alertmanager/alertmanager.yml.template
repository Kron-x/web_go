route:
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 1h 

  # –î–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å (–µ—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω route –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª)
  receiver: 'telegram-warning'

  # –ü—Ä–∞–≤–∏–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑!)
  routes:
  - match:
      severity: 'critical'
    receiver: 'telegram-critical'
    continue: true

  - match:
      severity: 'warning'
    receiver: 'telegram-warning'

receivers:
- name: 'telegram-critical'
  telegram_configs:
  - api_url: "https://api.telegram.org"
    bot_token: "$TELEGRAM_BOT_TOKEN"
    chat_id: $TELEGRAM_CHAT_ID
    message: "üö® CRITICAL: {{ .CommonAnnotations.summary }}"
    parse_mode: "HTML"

- name: 'telegram-warning'
  telegram_configs:
  - api_url: "https://api.telegram.org"
    bot_token: "$TELEGRAM_BOT_TOKEN"
    chat_id: $TELEGRAM_CHAT_ID
    message: |
      {{ if eq .Labels.severity "warning" }}
      ‚ö†Ô∏è WARNING: {{ .CommonAnnotations.summary }}
      {{ else }}
      ‚ÑπÔ∏è INFO: {{ .CommonAnnotations.summary }}
      {{ end }}
    parse_mode: "HTML"
